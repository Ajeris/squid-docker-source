# Authentication Examples for Squid
# ==================================
# This file contains example configurations for Kerberos and LDAP authentication
# Uncomment and modify the sections below when ready to enable authentication

# Kerberos Authentication Configuration
# ------------------------------------
# Requirements:
# - Kerberos realm configured
# - krb5.conf properly set up
# - Service principal for squid created

#auth_param negotiate program /usr/lib/squid/ext_kerberos_ldap_group_acl -d
#auth_param negotiate children 20 startup=0 idle=1
#auth_param negotiate keep_alive on

# LDAP Basic Authentication Configuration
# --------------------------------------
# Replace the following placeholders with your actual values:
# - dc=example,dc=com: Your LDAP base DN
# - cn=squid,ou=system,dc=example,dc=com: Service account DN
# - password: Service account password
# - ldap.example.com: Your LDAP server hostname

#auth_param basic program /usr/lib/squid/basic_ldap_auth \
#    -R \
#    -b "dc=example,dc=com" \
#    -D "cn=squid,ou=system,dc=example,dc=com" \
#    -w "password" \
#    -f sAMAccountName=%s \
#    -h ldap.example.com
#auth_param basic children 20 startup=0 idle=1
#auth_param basic realm Squid Proxy Server
#auth_param basic credentialsttl 2 hours

# LDAP Group Authorization
# -----------------------
# This allows checking if authenticated users belong to specific LDAP groups

#external_acl_type ldap_group ttl=300 children-max=20 children-startup=0 children-idle=1 \
#    %LOGIN /usr/lib/squid/ext_ldap_group_acl \
#    -R -K -S \
#    -b "dc=example,dc=com" \
#    -D "cn=squid,ou=system,dc=example,dc=com" \
#    -w "password" \
#    -f "(&(objectClass=person)(sAMAccountName=%v)(memberOf=cn=%a,ou=groups,dc=example,dc=com))" \
#    -h ldap.example.com

# ACLs for authenticated users and groups
#acl authenticated_users proxy_auth REQUIRED
#acl ldap_admins external ldap_group squid_admins
#acl ldap_users external ldap_group squid_users
#acl ldap_managers external ldap_group squid_managers

# Access rules using authentication
#http_access allow localnet authenticated_users
#http_access allow ldap_admins
#http_access allow ldap_users business_hours
#http_access allow ldap_managers

# Alternative: Simple user list authentication
# --------------------------------------------
# For environments without LDAP/Kerberos, you can use a simple user file

#auth_param basic program /usr/lib/squid/basic_ncsa_auth /etc/squid/passwd
#auth_param basic children 5 startup=5 idle=1
#auth_param basic realm Squid Proxy Server
#auth_param basic credentialsttl 2 hours

# Create user file with: htpasswd -c /etc/squid/passwd username

